<html lang="en">
<head >
    <meta charset="UTF-8">
    <title>File test</title>
</head>
<body>


<!--basic structure for a file uploads-->
<form action="upload" method="post" enctype="multipart/form-data">
    Select file to upload:

    <!--name and id are used as identifiers of the file on the server side-->
    <input type="file" name="fileToUpload">
    <input type="submit">
</form>


<!-- if clicked, make a file download popup-->
<script>
    //Script is local to make is easy to see


    //html side
    function download() {
        //Has to be a separate “page”
        //this make a URL of root/download
        // NodeJS’s routes figure out it is to serve a file
        // instead of html page.
        window.location.href = "download"
    }

    function selectedDownload() {
        //Has to be a separate “page”
        //this make a URL of root/download
        // NodeJS’s routes figure out it is to serve a file
        // instead of html page.
        window.location.href = "uploads/hidden.txt"
    }
</script>
<button onClick="download()">Download</button>
<button onClick="selectedDownload()">Selected Download</button>
<br>







<!-- if clicked, refresh the page, and write to the file -->
<script>
    //Script is local to make is easy to see

    //trigger writing stuff to the file, and stay on the same page
    function writeFile() {
        var xhttp = new XMLHttpRequest(); //say we want a new http connection

        //wait for a good connection
        xhttp.onreadystatechange = function() {
            if (this.readyState === 4 && this.status === 200) {

                //no response to care about
            }
        };

        //open connection with GET protocal
        xhttp.open( "GET", "write?write=1&stuff=1,2,3,4,5&more=stuff", true);

        //commit request
        xhttp.send();

    }


</script>
<button onClick="writeFile()">Write File by appending 1,2,3,4,5 and stuff</button>
<br>






<!-- if clicked, refresh the page, and add the file contents when doing so -->
<script>
    //Script is local to make is easy to see

    //trigger reading a file, and output to the page
    function readFile() {
        window.location.href = "read"
    }
</script>

<button onClick="readFile()">Read File</button>
<p>{{{read}}}</p>


<!-- template to show current file list-->
<p>Current files:</p>
<ul>
    {{#filelist}}
    <li>{{.}}</li>
    {{/filelist}}
</ul>

<!-- raw html {{{filelist}}} -->



</body>
</html>



