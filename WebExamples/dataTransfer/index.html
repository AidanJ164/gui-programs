<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Server Talk Examples</title>
</head>
<body>

<!-- Script are local to make it easy to see -->
<!-- This style rebuilds the page -->
<script>
    function incrementX(){
        window.location.href = "./index.html?x=1";
    }
    function incrementY(){
        window.location.href = "./index.html?y=1";
    }
    function reset() {
        window.location.href = "./index.html?reset=true";
    }
</script>

<!-- Connect the buttons to page refreshes-->
<h2>Test response individual variable </h2>
<button type="button" onclick='incrementX()'>X</button>
<button type="button" onclick='incrementY()'>Y</button>
<button type="button" onclick='reset()'>reset</button>

<!--Option 1A, just embed the result in HTML on rebuild
 using a template library (mustache in this case)-->
<h2>NodeJS  result (X count)</h2>
<p>{{xCnt}}</p>



<!--Option 1B, just embed the result in javascript on rebuild
 using a template library (mustache in this case)
 TIP: this is one way to load things into localstorage-->
<script>
    window.onload = function(){
        document.getElementById("yLoc").innerHTML= "Y count: " + {{yCnt}};
    }
</script>
<h2>NodeJS  result (Y count)</h2>
<p id="yLoc">should fill with Y after load</p>

<h2>NodeJS  result (formula count)</h2>
<p id="formula">should fill with X+Y after load</p>



<!-- OPTION 2) Server to JS through AJAX "return"-->
<h2>Ajax</h2>
<script>
    function getTotal() {
        var xhttp = new XMLHttpRequest(); //say we want a new http connection

        //wait for a good connection
        xhttp.onreadystatechange = function() {
            if (this.readyState === 4 && this.status === 200) {

                //ready now, get response text
                document.getElementById("ajax").innerHTML =this.responseText;
            }
        };

        //open connection with GET protocal
        xhttp.open( "GET", "./index.html?total=1", true);

        //commit request
        xhttp.send();

    }
</script>
<button type="button" onclick='getTotal()'>Load (total) below</button>
<p id="ajax"></p>

</body>
</html>